<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
<link href="../styles/styles.css" rel="stylesheet" type="text/css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
<script src="../scripts/main.js"></script>
<title>Sunshine Dentist Clinic</title>
<script>

	//From Sanu Antony, https://stackoverflow.com/questions/21085398/calculate-age-from-date-html-element
	function calcAge() {
		var date = new Date(document.getElementById("dateOfBirth").value)
		var today = new Date();

		var difference = Math.abs(today.getTime() - date.getTime());
		var age = Math.ceil(difference / (1000 * 3600 * 24)) / 365;

		return age;
	}

	function validate() {
		var patientSIN = document.getElementById("patientSIN");
		var userName = document.getElementById("userName");

		var firstName = document.getElementById("firstName");
		var middleName = document.getElementById("middleName");
		var lastName = document.getElementById("lastName");

		var dateOfBirth = document.getElementById("dateOfBirth");
		document.getElementById("age").value = calcAge();
		var gender = document.getElementById("gender");
		var patientEmail = document.getElementById("patientEmail");
		var patientPhoneNumber = document.getElementById("patientPhoneNumber");
		var address = document.getElementById("address");
		var patientPwd = document.getElementById("patientPwd");
		var patientPwdagain = document.getElementById("patientPwdagain");

		if (patientSIN.value == "" || userName.value == "" || firstName.value == "" || lastName.value == "" || patientPwd.value == "" || patientPwdagain.value == "" || dateOfBirth == "" || gender == "" || patientEmail == "" || patientPhoneNumber == "" || address == ""){
			alert("You need to fill all requiered fields");
			return false;
		}

		else if(patientSIN.value.length != 9){
			alert("The length of SIN needs to be 9 digits long");
			return false;
		}

		else if(age < 18){
			alert("Must be at least 18 years of age");
			return false;
		}

		else if(patientPwd.value != patientPwdagain.value){
			alert("Passwords need to match!");
			return false;
		}
		else
			return true;
	}

</script>
</head>
<body>

<div class = "container-fluid">

    <nav class="navbar text-white px-3 pt-3 mt-3">
      <h1 style="font-size: 400%"><img src="images/logo.png" width="80" height="80"> Welcome to Sunshine Dentist Clinic!</h1>
    </nav>
    
    <div class="content p-3 my-3 h-100 border" id="receptionists">
      <h1> Receptionist View</h1>
      <div class="p-1 my-1 border border-dark row justify-content-around" id="receptionistNav">
        <button class="p-1 m-1 mx-auto" style="width: 20rem;" onclick="openTab('newPatient')" >Add a New Patient</button>
        <button class="p-1 m-1 mx-auto" style="width: 20rem;" onclick="openTab('newApppointment')" >Set a New Appointment</button>
        <button class="p-1 m-1 mx-auto" style="width: 20rem;" onclick="openTab('editPatient')" >Edit Patient Information</button>
        <button class="p-1 m-1 mx-auto" style="width: 20rem;" onclick="location.href='index.html'" >Go Back</button>
      </div>
      
      <div class="tab p-3 my-3" style="display: none;" id="newPatient">
        <h2> New Patient</h2>
		<!--
		post refers to the method dePost from PatientRegisterServlet.java
		patientRegister is the masked/shortened directory of PatientRegisterServlet.java
		-->		
		<form method = "post" action="patientRegister">
          SIN:<input type="text" class="m-1 form-control" pattern="[0-9]{9}" placeholder="123456789" id="patientSIN" name="patientSIN" required>
          <small>Format: 123456789</small><br>
          Username:<input type="text" class="m-1 form-control" id="userName" name="userName" required>
          <small>Note: Used to login</small><br>
          First Name:<input type="text" class="m-1 form-control" id="firstName" name="firstName" required>
          Middle Name:<input type="text" class="m-1 form-control" id="middleName" name="middleName">
          Last Name:<input type="text" class="m-1 form-control" id="lastName" name="lastName" required>
          Date of Birth:<input type="date" class="m-1 form-control" id="dateOfBirth" name="dateOfBirth" required>
          <input type="hidden" id="age" class="m-1 form-control" name="age">
          Gender:<input type="text" class="m-1 form-control" id="gender" name="gender">
          E-mail Address:<input type="email" class="m-1 form-control" id="patientEmail" name="patientEmail" required>
          Phone Number:<input type="tel"class="m-1 form-control"  pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" placeholder="123-456-7890" id="patientPhoneNumber" name="patientPhoneNumber" required>
          <small>Format: 123-456-7890</small><br>
          Address:<input type="text" class="m-1 form-control" id="address" name="address" required>
          Enter Password:<input type="password" class="m-1 form-control" id="patientPwd" name="patientPwd" required>
          Re-enter Password:<input type="password" class="m-1 form-control" id="patientPwdagain" name="patientPwdagain" required>
          <button type="submit" value="submit" onclick="return validate();">Create Patient</button>
          <button type="reset" value="reset">Reset</button>
        </form>
      </div>
        
        
      <div class="tab p-3 my-3" style="display: none;" id="newApppointment">
        <h2> New Appointment</h2>
        <form>
			First Name:<input type="text" class="m-1 form-control" id="firstNameNA" name="firstName" required>
          	Middle Name:<input type="text" class="m-1 form-control" id="middleNameNA" name="middleName">
          	Last Name:<input type="text" class="m-1 form-control" id="lastNameNA" name="lastName" required>
			Date:<input class="m-1 form-control" type="date" id="date">
			Start Time:<input class="m-1 form-control" type="time" id="sTime">
			End Time:<input class="m-1 form-control" type="time" id="eTime">
			Room Assigned:<select class="m-1 form-control" id="roomNum">
			    <option value="1">Room 1</option>
			    <option value="2">Room 2</option>
			    <option value="3">Room 3</option>
			    <option value="4">Room 4</option>
			  </select>
			Appointment Type:<select class="m-1 form-control" id="aType">
			    <option value="cleaning">Cleaning</option>
			    <option value="cavity">Cavity</option>
			    <option value="pull">Tooth Pulled</option>
			  </select>
			<!-- Only makes sense for editing an appointment
			Status:<select class="m-1 form-control" id="aStatus">
			    <option value="upcoming">Upcoming</option>
			    <option value="cancelled">Cancelled</option>
			    <option value="completed">Completed</option>
			    <option value="noshow">No-Show</option>
			  </select> -->
			<button onclick="createPatient()">Create Appointment</button>
		</form> <br>
      </div>

      <div class="tab p-3 my-3" style="display: none;" id="editPatient">
        <h2> Edit Patient Information</h2>
        <div class="p-3 my-3" id="editPatientSearch">
          <label for="patientSearchFirstReception">First Name:</label><br>
          <input class="m-1 form-control" type="text" id="patientSearchReception">
          <label for="patientSearchLastReception">Last Name:</label><br>
          <input class="m-1 form-control" type="text" id="patientSearchLastReception"> <br>
          <button onclick="patientSearchReception()">Search for Patient</button>
        </div>

        <div class="p-3 my-3" style="display: none;" id="editPatientForm">
          <form>
            <label for="fNameEP">First Name:</label><br>
            <input class="m-1 form-control" type="text" id="fNameEP">
            <label for="mNameEP">Middle Name:</label><br>
            <input class="m-1 form-control" type="text" id="mNameEP">
            <label for="lNameEP">Last Name:</label><br>
            <input class="m-1 form-control" type="text" id="lNameEP">

            <label for="genderEP">Gender:</label><br>
            <div class="p-2 d-inline" id="genderEP">
              <form id="genderRadioEP">
                <input type="radio" class="m-1" name="gender" id="maleEP" value="Male"> <label for="male">Male</label>
                <input type="radio" class="m-1" name="gender" id="femaleEP" value="Female"> <label for="female">Female</label>
                <input type="radio" class="m-1" name="gender" id="otherEP" value="Other"> <label for="other">Other</label>
              </form>
            </div>

            <label for="dobEP">Date Of Birth:</label><br>
            <input class="m-1 form-control" type="date" id="dobEP">

            <label for="emailEP">Email:</label><br>
            <input class="m-1 form-control" type="email" id="emailEP">

            <label for="phoneEP">Phone number:</label><br>
            <input class="m-1 form-control" type="tel" id="phoneEP" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}">

            <label for="ssnEP">Social Security Number:</label><br>
            <input class="m-1 form-control" type="text" id="ssnEP">

            <label for="addressEP">Address:</label>
            <div class="px-2" id="addressEP">
              <label for="houseNumEP">House Number:</label><br>
              <input class="m-1 form-control" type="text" id="houseNumEP">
              <label for="streetEP">Street:</label><br>
              <input class="m-1 form-control" type="text" id="streetEP">
              <label for="cityEP">City:</label><br>
              <input class="m-1 form-control" type="text" id="cityEP">
              <label for="provinceEP">Province:</label><br>
              <input class="m-1 form-control" type="text" id="provinceEP">
            </div>
          </form> <br>

          <button onclick="updatePatient()">Update Patient</button>
          <button onclick="cancelUpdatePatient()">Cancel Update</button>
        </div>
      </div>
	</div>
</div>
</body>
</html>
